<html>

<head>
<title>StatusNet ID</title>
<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<script language="javascript"  type="text/javascript">

var api = 'http://identi.ca/api/';
var user_api = 'users/show/';
var user_rss = 'statuses/user_timeline/';
var group_api = 'statusnet/groups/show/';
var group_rss = 'statusnet/groups/timeline/';
var type = 'user'; // could be 'group' to follow a group
var user = 'bl4n';
var api_url = api+user_api;
var api_rss_url = api+user_rss;
if (type=='group') {
  api_url = api+group_api
  api_rss_url = api+group_rss;
}
url = api_url+user+'.xml';
function displayResult()
{
  if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
  }
  else
  {// code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
  xmlhttp.open("GET",url,false);
  xmlhttp.send();
  xmlDoc=xmlhttp.responseXML;

  user=xmlDoc.getElementsByTagName(type);
  try {
    id = user[0].getElementsByTagName("id")[0].childNodes[0].nodeValue;
  }
  catch (e)
  {
    id = e;
  }
  document.getElementById("content").innerHTML = id;
  rss_url = api_rss_url+id+'.xml';
  xmlhttp.open("GET",rss_url,false);
  xmlhttp.send();
  rssDoc=xmlhttp.responseXML;
  document.getElementById("content").innerHTML = rssDoc.getElementsByTagName("statuses")[0].getElementsByTagName("status")[0].getElementsByTagName("statusnet:html").item(0).firstChild.data;
}

</script>

<body onload="displayResult()">

<h2>ID</h2>
<div id="content"></div>
</body>

</html>
