function displayResult(){xmlhttp=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),xmlhttp.open("GET",url,!1),xmlhttp.send(),xmlDoc=xmlhttp.responseXML,userinfo=xmlDoc.getElementsByTagName(type);try{id=userinfo[0].getElementsByTagName("id")[0].childNodes[0].nodeValue}catch(e){id=e}try{img=userinfo[0].getElementsByTagName(img_name)[0].childNodes[0].nodeValue}catch(e){img=""}rss_url=api_rss_url+id+".xml",xmlhttp.open("GET",rss_url,!1),xmlhttp.send(),xmlDoc=xmlhttp.responseXML,content='<div id="eli_widget"><header>',""!=img&&(content+='<img src="'+img+'" alt="'+user+'" title="Avatar"/>'),content+=" <p>"+user+"</p></header>";for(var t=xmlDoc.getElementsByTagName("statuses").item(0).getElementsByTagName("status"),a=max-1,s=0;s<t.length;s++){try{var i=t[s].getElementsByTagName("statusnet:html").item(0).firstChild.data}catch(e){var i=""}try{var r,m="";if(["image/jpeg","image/gif","image/png","image/svg"].indexOf(t[s].getElementsByTagName("attachments").item(0).getElementsByTagName("enclosure").item(0).getAttribute("mimetype"))>=0)var r=t[s].getElementsByTagName("attachments").item(0).getElementsByTagName("enclosure").item(0).getAttribute("url"),m='<a target= "_blank" href="'+r+'"><img alt="Attachment" width="200" src='+r+" /></a>"}catch(e){var r,m=""}content+="<article>"+i+m+"</article>",a<t.length&&s==a&&(s=t.length)}content+="<footer></footer></div>",document.getElementById(tag).innerHTML=content}var type="user",user="debian",max=5,tag="elitimeline",domain="https://quitter.se",api="/api/",user_api="users/show/",user_rss="statuses/user_timeline/",group_api="statusnet/groups/show/",group_rss="statusnet/groups/timeline/",api_url=domain+api+user_api,api_rss_url=domain+api+user_rss,img_name="profile_image_url";"group"==type&&(api_url=domain+api+group_api,api_rss_url=domain+api+group_rss,img_name="stream_logo"),url=api_url+user+".xml",window.onload=displayResult;
